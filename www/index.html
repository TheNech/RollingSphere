<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Rolling Sphere</title>
	<script type="text/javascript" src="./lib/socket.io.js"></script>
	<script type="text/javascript" src="./lib/jquery.min.js"></script>
	<script type="text/javascript" src="./lib/three.min.js"></script>
	<script type="text/javascript" src="./lib/OrbitControls.js"></script>
	<script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script> 

	<link href="./css/style.css" rel="stylesheet">
	<link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="./bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
</head>
<body>
	<div id="container"></div>

	<div id="overlay-start">
		<p>Rolling Sphere</p>
		<form id="inputs">			
			<input id="inputNickname" class="form-control" name="nickname" placeholder="Your nickname">
			<input id="inputPassword" class="form-control" name="password" placeholder="Your password" type="password">
			<div id="buttons">
				<button id="btnReg" class="btn-link active" type="button">Registration</button>
				<button id="btnEnter" class="btn btn-primary" type="button">Login</button>	
			</div>
		</form>		
	</div>

	<script type="text/javascript">
		var nick = $('#inputNickname').val();
		var pass = $('#inputPassword').val();

		$("#btnEnter").on('click', (function() {
			socket.emit('auth', { username: nick, password: pass });					
		}));		
		
		$("#inputs").trigger('reset');		
	</script>
	
	<div id="modalBoxReg" class="modal fade" data-backdrop="static">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" type="button" data-dismiss="modal">
						&times;
					</button>
					<h4 class="modal-title">Registration</h4>
				</div>
				<div class="modal-body">
					<form id="inpReg">
						<input id="inputNick" class="form-control" name="nickname" placeholder="Your nickname" required>
						<input id="inputPass" class="form-control" name="password" placeholder="Your password" type="password">	
						<input id="inputRepeatPass" class="form-control" name="repeatPass" placeholder="Repeat your password" type="password">
					</form>
				</div>
				<div class="modal-footer">
					<button id="btnRegRegistr" class="btn btn-primary active" type="button">Registration</button>
					<button id="btnRegClose" class="btn btn-danger active" type="button" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$('#btnReg').on('click', function () {
			$('#modalBoxReg').modal('show');
		});

		$('#btnRegRegistr').on('click', function () {
			if ($('#inputNick').val().length == 0 || $('#inputPass').val().length == 0 || $('#inputRepeatPass').val().length == 0) {
				alert('Not all fields are filled');
				return;
			}

			if ($('#inputPass').val() != $('#inputRepeatPass').val()) {
				alert('Passwords do not match');
				return;
			}

			socket.emit('reg', { username: $('#inputNick').val(), password: $('#inputPass').val(), repeatPass: $('#inputRepeatPass').val() });
		});

		$('#inpReg').trigger('reset');
	</script>

	<div id="modalBoxResult" class="modal fade" data-backdrop="static">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" type="button" data-dismiss="modal">
						&times;
					</button>
					<h4 class="modal-title">Result</h4>
				</div>
				<div class="modal-body">
					<p></p>
					<p></p>
					<p></p>
				</div>
				<div class="modal-footer">
					<button id="btn-OK" class="btn btn-primary" type="button"><font>OK</font></button>
					<button id="btn-restart" class="btn btn-primary" type="button">Restart</button>
				</div>
			</div>
		</div>
	</div>

	<div id="mainScreen">
		<div id="btnStartGame">
			<button type="button" class="btn btn-primary">Start Game</button>
		</div>
		<div>
			
		</div>
	</div>

		
	<div id ="overlay-gameover">
		<div class="message-container">
			<p><font color="Boston University Red" face="Algerian">Game over!</font></p>
			<p><font size="7" color="" face="Algerian">Score: </font></p>
			<button id="btn-returnMainMenu">Main menu</button>
			<button id="btn-restart">Play again</button>
		</div>
	</div>
	<div id="score"><p>Score: 0</p></div>
	<script type="text/javascript" src="./js/game.js"></script>
	<script type="text/javascript">
		var socket = io('http://localhost:8080');
		socket.on('connected', function(data) {
			console.log('My id : ' + data.id);
		});
		socket.on('new-player-connected', function(data) {
			console.log('New player was connected. Id: ' + data.id + "\tCurrent number of players is " + data.pNumber);
		});
		socket.on('player-disconnected', function(data) {
			console.log('Player was disconnected. Id: ' + data.id + "\tCurrent number of players is " + data.pNumber);
		});
	</script>
</body>
</html>
